<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShoeStock Pro - Footwear Inventory & Sales Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .mobile-container {
            max-width: 480px;
            margin: 0 auto;
            min-height: 100vh;
            background: #ffffff;
        }
        .toggle-checkbox:checked {
            @apply right-0 border-green-500;
        }
        .toggle-checkbox:checked + .toggle-label {
            @apply bg-green-500;
        }
        input[type="date"]::-webkit-calendar-picker-indicator {
            filter: invert(0.5);
        }
        /* For desktop view */
        @media (min-width: 768px) {
            .mobile-container {
                max-width: 100%;
            }
        }
        .inventory-table {
            width: 100%;
            border-collapse: collapse;
        }
        .inventory-table th {
            background-color: #f3f4f6;
            padding: 8px;
            text-align: left;
            font-weight: 600;
            font-size: 0.875rem;
        }
        .inventory-table td {
            padding: 8px;
            border-bottom: 1px solid #e5e7eb;
        }
        .inventory-table tr:hover {
            background-color: #f9fafb;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div class="mobile-container shadow-lg">
        <!-- Header -->
        <header class="bg-blue-600 text-white p-4 sticky top-0 z-50">
            <div class="flex justify-between items-center">
                <h1 class="text-xl font-bold">ShoeStock Pro</h1>
                <button class="p-2" onclick="toggleMenu()">
                    <i class="bi bi-three-dots-vertical"></i>
                </button>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="bg-white border-b">
            <div class="flex justify-around p-3">
                <button class="flex flex-col items-center text-blue-600" onclick="showSection('dashboard')">
                    <i class="bi bi-grid-fill text-xl"></i>
                    <span class="text-xs mt-1">Dashboard</span>
                </button>
                <button class="flex flex-col items-center text-gray-500" onclick="showSection('inventory')">
                    <i class="bi bi-box-seam text-xl"></i>
                    <span class="text-xs mt-1">Inventory</span>
                </button>
                <button class="flex flex-col items-center text-gray-500" onclick="showSection('sales')">
                    <i class="bi bi-cart text-xl"></i>
                    <span class="text-xs mt-1">Sales</span>
                </button>
                <button class="flex flex-col items-center text-gray-500" onclick="showSection('reports')">
                    <i class="bi bi-bar-chart text-xl"></i>
                    <span class="text-xs mt-1">Reports</span>
                </button>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="p-4">
            <!-- Dashboard Section -->
            <section id="dashboard" class="space-y-4">
                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="text-sm text-gray-600">Total Stock</h3>
                        <p class="text-2xl font-bold text-blue-600">247</p>
                    </div>
                    <div class="bg-green-50 p-4 rounded-lg">
                        <h3 class="text-sm text-gray-600">Today's Sales</h3>
                        <p class="text-2xl font-bold text-green-600">$1,234</p>
                    </div>
                </div>
                <div class="bg-white rounded-lg p-4 shadow">
                    <h2 class="font-semibold mb-3">Low Stock Alert</h2>
                    <ul class="space-y-2">
                        <li class="flex justify-between items-center text-sm">
                            <span>Nike Air Max</span>
                            <span class="text-red-500">2 pairs left</span>
                        </li>
                        <li class="flex justify-between items-center text-sm">
                            <span>Adidas Runner</span>
                            <span class="text-red-500">3 pairs left</span>
                        </li>
                    </ul>
                </div>
                <div class="bg-white rounded-lg p-4 shadow">
                    <h2 class="font-semibold mb-3">Inventory Aging</h2>
                    <div class="space-y-2">
                        <div class="flex justify-between items-center text-sm">
                            <span>Unsold > 90 days</span>
                            <span class="text-red-500">32 items</span>
                        </div>
                        <div class="flex justify-between items-center text-sm">
                            <span>Unsold 60-90 days</span>
                            <span class="text-yellow-500">45 items</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Inventory Section -->
            <section id="inventory" class="hidden space-y-4">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-lg font-semibold">Inventory Management</h2>
                    <div class="flex space-x-2">
                        <button onclick="showInventoryForm()" class="bg-blue-600 text-white p-2 rounded-md">
                            <i class="bi bi-plus"></i>
                        </button>
                        <button onclick="exportInventory()" class="bg-green-600 text-white p-2 rounded-md">
                            <i class="bi bi-file-earmark-excel"></i>
                        </button>
                    </div>
                </div>
                
                <div class="mb-4 flex flex-col md:flex-row gap-2">
                    <input type="text" id="searchInventory" placeholder="Search inventory..." class="flex-grow p-2 border rounded-lg" oninput="searchInventoryItems()">
                    <button onclick="showCategoryModal()" class="bg-gray-200 text-gray-700 px-3 py-1 rounded-lg text-sm">
                        <i class="bi bi-plus-circle mr-1"></i>Add Category
                    </button>
                    <button onclick="showBrandModal()" class="bg-gray-200 text-gray-700 px-3 py-1 rounded-lg text-sm">
                        <i class="bi bi-plus-circle mr-1"></i>Add Brand
                    </button>
                </div>
                
                <div class="bg-white rounded-lg shadow overflow-x-auto">
                    <table class="inventory-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Product Name</th>
                                <th>Brand</th>
                                <th>Category</th>
                                <th>Color</th>
                                <th>Size</th>
                                <th>Sex</th>
                                <th>Stock</th>
                                <th>Net Price</th>
                                <th>Sale Price</th>
                                <th>Age</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="inventoryTableBody">
                            <tr>
                                <td>INV-001-9</td>
                                <td>Air Max</td>
                                <td>Nike</td>
                                <td>Sneakers</td>
                                <td>White/Blue</td>
                                <td>9</td>
                                <td>Men</td>
                                <td>8</td>
                                <td>$89.99</td>
                                <td>$129.99</td>
                                <td>45 days</td>
                                <td><button class="bg-blue-100 text-blue-600 px-2 py-1 rounded-full text-xs" onclick="editInventoryItem('INV-001-9')">Edit</button></td>
                            </tr>
                            <tr>
                                <td>INV-001-10</td>
                                <td>Air Max</td>
                                <td>Nike</td>
                                <td>Sneakers</td>
                                <td>White/Blue</td>
                                <td>10</td>
                                <td>Men</td>
                                <td>4</td>
                                <td>$89.99</td>
                                <td>$129.99</td>
                                <td>45 days</td>
                                <td><button class="bg-blue-100 text-blue-600 px-2 py-1 rounded-full text-xs" onclick="editInventoryItem('INV-001-10')">Edit</button></td>
                            </tr>
                            <tr>
                                <td>INV-002-8</td>
                                <td>Runner</td>
                                <td>Adidas</td>
                                <td>Sports</td>
                                <td>Black/Red</td>
                                <td>8</td>
                                <td>Women</td>
                                <td>3</td>
                                <td>$65.50</td>
                                <td>$94.50</td>
                                <td>30 days</td>
                                <td><button class="bg-blue-100 text-blue-600 px-2 py-1 rounded-full text-xs" onclick="editInventoryItem('INV-002-8')">Edit</button></td>
                            </tr>
                            <tr>
                                <td>INV-002-9</td>
                                <td>Runner</td>
                                <td>Adidas</td>
                                <td>Sports</td>
                                <td>Black/Red</td>
                                <td>9</td>
                                <td>Women</td>
                                <td>5</td>
                                <td>$65.50</td>
                                <td>$94.50</td>
                                <td>30 days</td>
                                <td><button class="bg-blue-100 text-blue-600 px-2 py-1 rounded-full text-xs" onclick="editInventoryItem('INV-002-9')">Edit</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- Inventory List (Mobile View) -->
                <div id="inventoryListMobile" class="space-y-3 md:hidden">
                    <div class="bg-white p-3 rounded-lg shadow">
                        <div class="flex justify-between items-start">
                            <div>
                                <h3 class="font-semibold">Nike Air Max</h3>
                                <p class="text-sm text-gray-500">Men's Sneakers | Size: 9</p>
                                <p class="text-sm text-gray-500">Color: White/Blue</p>
                                <p class="text-sm text-gray-500">Stock: 8 pairs | Age: 45 days</p>
                                <p class="text-xs text-gray-400">ID: INV-001-9</p>
                            </div>
                            <div class="text-right">
                                <p class="font-semibold text-green-600">$129.99</p>
                                <button class="bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-sm mt-2" onclick="editInventoryItem('INV-001-9')">Edit</button>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white p-3 rounded-lg shadow">
                        <div class="flex justify-between items-start">
                            <div>
                                <h3 class="font-semibold">Adidas Runner</h3>
                                <p class="text-sm text-gray-500">Women's Sports | Size: 8</p>
                                <p class="text-sm text-gray-500">Color: Black/Red</p>
                                <p class="text-sm text-gray-500">Stock: 3 pairs | Age: 30 days</p>
                                <p class="text-xs text-gray-400">ID: INV-002-8</p>
                            </div>
                            <div class="text-right">
                                <p class="font-semibold text-green-600">$94.50</p>
                                <button class="bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-sm mt-2" onclick="editInventoryItem('INV-002-8')">Edit</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Inventory Form Modal -->
                <div id="inventoryFormModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                    <div class="bg-white rounded-lg w-11/12 max-w-md p-4 max-h-[90vh] overflow-y-auto">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-lg font-semibold">Add Inventory</h2>
                            <button onclick="hideInventoryForm()" class="text-gray-500">
                                <i class="bi bi-x-lg"></i>
                            </button>
                        </div>
                        
                        <form id="inventoryForm" class="space-y-3">
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Product Name</label>
                                <input type="text" id="productName" placeholder="Enter product name" class="w-full p-2 border rounded" required>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Category</label>
                                <div class="flex space-x-2">
                                    <select id="categorySelect" class="w-full p-2 border rounded" required>
                                        <option value="">Select Category</option>
                                        <option value="sneakers">Sneakers</option>
                                        <option value="sports">Sports</option>
                                        <option value="casual">Casual</option>
                                        <option value="formal">Formal</option>
                                    </select>
                                    <button type="button" onclick="showCategoryModal()" class="bg-gray-200 p-2 rounded">
                                        <i class="bi bi-plus"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Brand</label>
                                <div class="flex space-x-2">
                                    <select id="brandSelect" class="w-full p-2 border rounded" required>
                                        <option value="">Select Brand</option>
                                        <option value="nike">Nike</option>
                                        <option value="adidas">Adidas</option>
                                        <option value="puma">Puma</option>
                                        <option value="reebok">Reebok</option>
                                        <option value="other">Other</option>
                                    </select>
                                    <button type="button" onclick="showBrandModal()" class="bg-gray-200 p-2 rounded">
                                        <i class="bi bi-plus"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Color</label>
                                <input type="text" id="productColor" placeholder="Enter color (e.g. White/Blue)" class="w-full p-2 border rounded" required>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Sex</label>
                                <div class="flex space-x-4">
                                    <label class="flex items-center">
                                        <input type="radio" name="sex" value="men" class="mr-1" checked>
                                        <span>Men</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="radio" name="sex" value="women" class="mr-1">
                                        <span>Women</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="radio" name="sex" value="unisex" class="mr-1">
                                        <span>Unisex</span>
                                    </label>
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Sizes (select multiple)</label>
                                <div class="grid grid-cols-4 gap-2">
                                    <label class="flex items-center">
                                        <input type="checkbox" name="sizes" value="5" class="mr-1">
                                        <span>5</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="sizes" value="6" class="mr-1">
                                        <span>6</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="sizes" value="7" class="mr-1">
                                        <span>7</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="sizes" value="8" class="mr-1">
                                        <span>8</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="sizes" value="9" class="mr-1">
                                        <span>9</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="sizes" value="10" class="mr-1">
                                        <span>10</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="sizes" value="11" class="mr-1">
                                        <span>11</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="sizes" value="12" class="mr-1">
                                        <span>12</span>
                                    </label>
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Quantity per Size</label>
                                <input type="number" id="quantityPerSize" min="1" placeholder="Enter quantity" class="w-full p-2 border rounded" required>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Net Price ($)</label>
                                <input type="number" id="netPrice" step="0.01" min="0" placeholder="Cost price" class="w-full p-2 border rounded" required>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Sales Price ($)</label>
                                <input type="number" id="salesPrice" step="0.01" min="0" placeholder="Selling price" class="w-full p-2 border rounded" required>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Inventory Date</label>
                                <input type="date" id="inventoryDate" class="w-full p-2 border rounded" required>
                            </div>
                            
                            <div class="pt-3">
                                <label class="relative inline-flex items-center cursor-pointer mb-3">
                                    <input type="checkbox" id="bulkUpload" class="sr-only toggle-checkbox">
                                    <div class="w-11 h-6 bg-gray-200 rounded-full border border-gray-200 toggle-label after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:border after:border-gray-300 after:h-5 after:w-5 after:rounded-full after:transition-all"></div>
                                    <span class="ml-3 text-sm font-medium text-gray-600">Bulk Upload</span>
                                </label>
                                
                                <div id="bulkUploadSection" class="hidden">
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Upload Excel File</label>
                                    <input type="file" id="excelFile" accept=".xlsx,.xls,.csv" class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                                    <p class="text-xs text-gray-500 mt-1">Upload file with multiple inventory entries</p>
                                    <div class="mt-2">
                                        <a href="#" class="text-blue-600 text-sm hover:underline" onclick="downloadTemplate(event)">Download template</a>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="pt-3">
                                <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded">Save Inventory</button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <!-- Add Category Modal -->
                <div id="categoryModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                    <div class="bg-white rounded-lg w-11/12 max-w-md p-4">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-lg font-semibold">Add Category</h2>
                            <button onclick="hideCategoryModal()" class="text-gray-500">
                                <i class="bi bi-x-lg"></i>
                            </button>
                        </div>
                        
                        <form id="categoryForm" class="space-y-3">
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Category Name</label>
                                <input type="text" id="categoryName" placeholder="Enter category name" class="w-full p-2 border rounded" required>
                            </div>
                            
                            <div class="pt-3">
                                <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded">Add Category</button>
                            </div>001
                        </form>
                    </div>
                </div>
                
                <!-- Add Brand Modal -->
                <div id="brandModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                    <div class="bg-white rounded-lg w-11/12 max-w-md p-4">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-lg font-semibold">Add Brand</h2>
                            <button onclick="hideBrandModal()" class="text-gray-500">
                                <i class="bi bi-x-lg"></i>
                            </button>
                        </div>
                        
                        <form id="brandForm" class="space-y-3">
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Brand Name</label>
                                <input type="text" id="brandName" placeholder="Enter brand name" class="w-full p-2 border rounded" required>
                            </div>
                            
                            <div class="pt-3">
                                <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded">Add Brand</button>
                            </div>
                        </form>
                    </div>
                </div>
            </section>

            <!-- Sales Section -->
            <section id="sales" class="hidden space-y-4">
                <div class="bg-white rounded-lg p-4 shadow mb-4">
                    <h2 class="font-semibold mb-3">New Sale</h2>
                    <form class="space-y-3" id="saleForm">
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Product</label>
                            <select id="productSelect" class="w-full p-2 border rounded" required onchange="updateSizeOptions()">
                                <option value="">Select Product</option>
                                <option value="nike">Nike Air Max</option>
                                <option value="adidas">Adidas Runner</option>
                                <option value="puma">Puma Classic</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Size</label>
                            <select id="sizeSelect" class="w-full p-2 border rounded" required>
                                <option value="">Select Size</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Quantity</label>
                            <input type="number" min="1" placeholder="Quantity" class="w-full p-2 border rounded" required>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Price ($)</label>
                            <input type="number" step="0.01" min="0" id="salePrice" class="w-full p-2 border rounded bg-gray-50" readonly>
                        </div>
                        
                        <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded">Complete Sale</button>
                    </form>
                </div>
                
                <div class="bg-white rounded-lg p-4 shadow">
                    <h2 class="font-semibold mb-3">Recent Sales</h2>
                    <div class="space-y-2">
                        <div class="border-b pb-2">
                            <div class="flex justify-between">
                                <span class="font-medium">Nike Air Max (Size 9)</span>
                                <span class="text-green-600">$129.99</span>
                            </div>
                            <p class="text-xs text-gray-500">Today, 10:23 AM • 1 pair</p>
                        </div>
                        <div class="border-b pb-2">
                            <div class="flex justify-between">
                                <span class="font-medium">Adidas Runner (Size 8)</span>
                                <span class="text-green-600">$94.50</span>
                            </div>
                            <p class="text-xs text-gray-500">Today, 9:15 AM • 1 pair</p>
                        </div>
                        <div>
                            <div class="flex justify-between">
                                <span class="font-medium">Puma Classic (Size 10)</span>
                                <span class="text-green-600">$79.99</span>
                            </div>
                            <p class="text-xs text-gray-500">Yesterday, 4:45 PM • 2 pairs</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Reports Section -->
            <section id="reports" class="hidden space-y-4">
                <div class="flex justify-between items-center mb-2">
                    <h2 class="text-lg font-semibold">Reports</h2>
                    <select id="reportPeriod" class="border rounded p-1 text-sm">
                        <option value="week">This Week</option>
                        <option value="month">This Month</option>
                        <option value="quarter">This Quarter</option>
                        <option value="year">This Year</option>
                    </select>
                </div>
                
                <div class="bg-white p-4 rounded-lg shadow">
                    <h2 class="font-semibold mb-3">Sales Report</h2>
                    <canvas id="salesChart" width="100" height="50"></canvas>
                </div>
                
                <div class="bg-white p-4 rounded-lg shadow">
                    <h2 class="font-semibold mb-3">Top Selling Items</h2>
                    <ul class="space-y-2">
                        <li class="flex justify-between items-center">
                            <span>Nike Air Max</span>
                            <span class="text-green-600">123 sold</span>
                        </li>
                        <li class="flex justify-between items-center">
                            <span>Adidas Runner</span>
                            <span class="text-green-600">87 sold</span>
                        </li>
                        <li class="flex justify-between items-center">
                            <span>Puma Classic</span>
                            <span class="text-green-600">64 sold</span>
                        </li>
                    </ul>
                </div>
                
                <div class="bg-white p-4 rounded-lg shadow">
                    <h2 class="font-semibold mb-3">Inventory Aging Report</h2>
                    <div class="space-y-2">
                        <div class="w-full bg-gray-200 rounded-full h-2.5">
                            <div class="bg-green-500 h-2.5 rounded-full" style="width: 45%"></div>
                        </div>
                        <div class="flex justify-between text-xs">
                            <span>0-30 days: 45%</span>
                            <span>31-60 days: 25%</span>
                            <span>60+ days: 30%</span>
                        </div>
                        <button class="w-full mt-2 text-blue-600 text-sm">View Detailed Report</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script>
        // Global data storage
        let inventory = [
            { id: 'INV-001-9', productName: 'Air Max', brand: 'Nike', model: 'Air Max', category: 'Sneakers', color: 'White/Blue', size: 9, sex: 'Men', stock: 8, netPrice: 89.99, salePrice: 129.99, date: '2023-05-15', age: 45 },
            { id: 'INV-001-10', productName: 'Air Max', brand: 'Nike', model: 'Air Max', category: 'Sneakers', color: 'White/Blue', size: 10, sex: 'Men', stock: 4, netPrice: 89.99, salePrice: 129.99, date: '2023-05-15', age: 45 },
            { id: 'INV-002-8', productName: 'Runner', brand: 'Adidas', model: 'Runner', category: 'Sports', color: 'Black/Red', size: 8, sex: 'Women', stock: 3, netPrice: 65.50, salePrice: 94.50, date: '2023-05-30', age: 30 },
            { id: 'INV-002-9', productName: 'Runner', brand: 'Adidas', model: 'Runner', category: 'Sports', color: 'Black/Red', size: 9, sex: 'Women', stock: 5, netPrice: 65.50, salePrice: 94.50, date: '2023-05-30', age: 30 },
        ];
        
        let categories = ['Sneakers', 'Sports', 'Casual', 'Formal'];
        let brands = ['Nike', 'Adidas', 'Puma', 'Reebok', 'Other'];
        
        // Navigation functionality
        function showSection(sectionId) {
            const sections = ['dashboard', 'inventory', 'sales', 'reports'];
            sections.forEach(id => {
                document.getElementById(id).classList.add('hidden');
            });
            document.getElementById(sectionId).classList.remove('hidden');
            
            // Update active nav button
            const buttons = document.querySelectorAll('nav button');
            buttons.forEach(button => {
                button.classList.remove('text-blue-600');
                button.classList.add('text-gray-500');
            });
            event.currentTarget.classList.remove('text-gray-500');
            event.currentTarget.classList.add('text-blue-600');
            
            // Initialize charts if reports section is shown
            if (sectionId === 'reports') {
                initializeCharts();
            }
        }

        // Menu toggle
        function toggleMenu() {
            alert('Menu options: \n- Settings\n- Profile\n- Logout\n- Export Data');
        }

        // Inventory form modal
        function showInventoryForm() {
            document.getElementById('inventoryFormModal').classList.remove('hidden');
        }
        
        function hideInventoryForm() {
            document.getElementById('inventoryFormModal').classList.add('hidden');
        }
        
        // Category modal
        function showCategoryModal() {
            document.getElementById('categoryModal').classList.remove('hidden');
        }
        
        function hideCategoryModal() {
            document.getElementById('categoryModal').classList.add('hidden');
        }
        
        // Brand modal
        function showBrandModal() {
            document.getElementById('brandModal').classList.remove('hidden');
        }
        
        function hideBrandModal() {
            document.getElementById('brandModal').classList.add('hidden');
        }
        
        // Bulk upload toggle
        document.getElementById('bulkUpload').addEventListener('change', function() {
            const bulkSection = document.getElementById('bulkUploadSection');
            if (this.checked) {
                bulkSection.classList.remove('hidden');
            } else {
                bulkSection.classList.add('hidden');
            }
        });
        
        // Download Excel template
        function downloadTemplate(event) {
            event.preventDefault();
            
            const template = [
                {
                    'Product Name': 'Air Max',
                    'Category': 'Sneakers',
                    'Brand': 'Nike',
                    'Color': 'White/Blue',
                    'Sex': 'Men',
                    'Size': 9,
                    'Quantity': 10,
                    'Net Price': 89.99,
                    'Sales Price': 129.99,
                    'Inventory Date': '2023-06-30'
                }
            ];
            
            const ws = XLSX.utils.json_to_sheet(template);
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, "Inventory Template");
            XLSX.writeFile(wb, "inventory_template.xlsx");
        }
        
        // Inventory form submission
        document.getElementById('inventoryForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const bulkUpload = document.getElementById('bulkUpload').checked;
            
            if (bulkUpload) {
                const fileInput = document.getElementById('excelFile');
                if (fileInput.files.length === 0) {
                    alert('Please select an Excel file for bulk upload');
                    return;
                }
                
                const file = fileInput.files[0];
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    const data = e.target.result;
                    const workbook = XLSX.read(data, { type: 'binary' });
                    const sheetName = workbook.SheetNames[0];
                    const worksheet = workbook.Sheets[sheetName];
                    const jsonData = XLSX.utils.sheet_to_json(worksheet);
                    
                    processBulkInventory(jsonData);
                };
                
                reader.onerror = function() {
                    alert('Error reading file');
                };
                
                reader.readAsBinaryString(file);
            } else {
                // Process single inventory entry
                const productName = document.getElementById('productName').value;
                const category = document.getElementById('categorySelect').value;
                const brand = document.getElementById('brandSelect').value;
                const color = document.getElementById('productColor').value;
                const sex = document.querySelector('input[name="sex"]:checked').value;
                const sizes = Array.from(document.querySelectorAll('input[name="sizes"]:checked')).map(cb => cb.value);
                const quantity = document.getElementById('quantityPerSize').value;
                const netPrice = document.getElementById('netPrice').value;
                const salesPrice = document.getElementById('salesPrice').value;
                const date = document.getElementById('inventoryDate').value;
                
                if (sizes.length === 0) {
                    alert('Please select at least one size');
                    return;
                }
                
                // Create inventory entries for each selected size
                processSingleInventory(productName, category, brand, color, sex, sizes, quantity, netPrice, salesPrice, date);
            }
            
            alert('Inventory saved successfully!');
            hideInventoryForm();
            updateInventoryDisplay();
        });
        
        // Process single inventory entry
        function processSingleInventory(productName, category, brand, color, sex, sizes, quantity, netPrice, salesPrice, date) {
            const baseId = generateBaseId();
            
            // Calculate age in days
            const inventoryDate = new Date(date);
            const today = new Date();
            const ageInDays = Math.floor((today - inventoryDate) / (1000 * 60 * 60 * 24));
            
            // Create inventory entries for each selected size
            sizes.forEach(size => {
                const id = `${baseId}-${size}`;
                inventory.push({
                    id: id,
                    productName: productName,
                    brand: brand,
                    model: productName,
                    category: category,
                    color: color,
                    size: parseInt(size),
                    sex: sex,
                    stock: parseInt(quantity),
                    netPrice: parseFloat(netPrice),
                    salePrice: parseFloat(salesPrice),
                    date: date,
                    age: ageInDays
                });
            });
        }
        
        // Process bulk inventory upload
        function processBulkInventory(data) {
            data.forEach(item => {
                const baseId = generateBaseId();
                
                const inventoryDate = new Date(item['Inventory Date']);
                const today = new Date();
                const ageInDays = Math.floor((today - inventoryDate) / (1000 * 60 * 60 * 24));
                
                const id = `${baseId}-${item.Size}`;
                inventory.push({
                    id: id,
                    productName: item['Product Name'] || item.Model || `${item.Brand} Model`,
                    brand: item.Brand,
                    model: item['Product Name'] || item.Model || `${item.Brand} Model`,
                    category: item.Category,
                    color: item.Color || 'N/A',
                    size: parseInt(item.Size),
                    sex: item.Sex,
                    stock: parseInt(item.Quantity),
                    netPrice: parseFloat(item['Net Price']),
                    salePrice: parseFloat(item['Sales Price']),
                    date: item['Inventory Date'],
                    age: ageInDays
                });
            });
        }
        
        // Generate unique base ID
        function generateBaseId() {
            return `INV-${Math.floor(Math.random() * 10000).toString().padStart(4, '0')}`;
        }
        
        // Update inventory display
        function updateInventoryDisplay() {
            // Update table view
            const tableBody = document.getElementById('inventoryTableBody');
            tableBody.innerHTML = '';
            
            inventory.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${item.id}</td>
                    <td>${item.productName}</td>
                    <td>${item.brand}</td>
                    <td>${item.category}</td>
                    <td>${item.color}</td>
                    <td>${item.size}</td>
                    <td>${item.sex}</td>
                    <td>${item.stock}</td>
                    <td>$${item.netPrice.toFixed(2)}</td>
                    <td>$${item.salePrice.toFixed(2)}</td>
                    <td>${item.age} days</td>
                    <td><button class="bg-blue-100 text-blue-600 px-2 py-1 rounded-full text-xs" onclick="editInventoryItem('${item.id}')">Edit</button></td>
                `;
                tableBody.appendChild(row);
            });
            
            // Update mobile view
            const mobileList = document.getElementById('inventoryListMobile');
            mobileList.innerHTML = '';
            
            inventory.forEach(item => {
                const div = document.createElement('div');
                div.className = 'bg-white p-3 rounded-lg shadow';
                div.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-semibold">${item.brand} ${item.productName}</h3>
                            <p class="text-sm text-gray-500">${item.sex}'s ${item.category} | Size: ${item.size}</p>
                            <p class="text-sm text-gray-500">Color: ${item.color}</p>
                            <p class="text-sm text-gray-500">Stock: ${item.stock} pairs | Age: ${item.age} days</p>
                            <p class="text-xs text-gray-400">ID: ${item.id}</p>
                        </div>
                        <div class="text-right">
                            <p class="font-semibold text-green-600">$${item.salePrice.toFixed(2)}</p>
                            <button class="bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-sm mt-2" onclick="editInventoryItem('${item.id}')">Edit</button>
                        </div>
                    </div>
                `;
                mobileList.appendChild(div);
            });
        }
        
        // Edit inventory item
        function editInventoryItem(id) {
            const item = inventory.find(i => i.id === id);
            if (!item) return;
            
            // Fill the form with item data
            document.getElementById('productName').value = item.productName;
            document.getElementById('categorySelect').value = item.category.toLowerCase();
            document.getElementById('brandSelect').value = item.brand.toLowerCase();
            document.getElementById('productColor').value = item.color;
            
            // Set the sex
            document.querySelector(`input[name="sex"][value="${item.sex.toLowerCase()}"]`).checked = true;
            
            // Clear all size checkboxes
            document.querySelectorAll('input[name="sizes"]').forEach(cb => cb.checked = false);
            
            // Check the size that matches this item
            const sizeCheckbox = document.querySelector(`input[name="sizes"][value="${item.size}"]`);
            if (sizeCheckbox) sizeCheckbox.checked = true;
            
            document.getElementById('quantityPerSize').value = item.stock;
            document.getElementById('netPrice').value = item.netPrice;
            document.getElementById('salesPrice').value = item.salePrice;
            document.getElementById('inventoryDate').value = item.date;
            
            // Show the form
            showInventoryForm();
            
            // Store the item ID for updating
            document.getElementById('inventoryForm').dataset.editingId = id;
        }
        
        // Category form submission
        document.getElementById('categoryForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const categoryName = document.getElementById('categoryName').value;
            if (!categories.includes(categoryName)) {
                categories.push(categoryName);
                
                // Update category dropdown
                const categorySelect = document.getElementById('categorySelect');
                const option = document.createElement('option');
                option.value = categoryName.toLowerCase();
                option.textContent = categoryName;
                categorySelect.appendChild(option);
            }
            
            alert(`Category '${categoryName}' added successfully!`);
            document.getElementById('categoryName').value = '';
            hideCategoryModal();
        });
        
        // Brand form submission
        document.getElementById('brandForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const brandName = document.getElementById('brandName').value;
            if (!brands.includes(brandName)) {
                brands.push(brandName);
                
                // Update brand dropdown
                const brandSelect = document.getElementById('brandSelect');
                const option = document.createElement('option');
                option.value = brandName.toLowerCase();
                option.textContent = brandName;
                brandSelect.appendChild(option);
            }
            
            alert(`Brand '${brandName}' added successfully!`);
            document.getElementById('brandName').value = '';
            hideBrandModal();
        });
        
        // Export inventory
        function exportInventory() {
            const exportData = inventory.map(item => {
                return {
                    'ID': item.id,
                    'Product Name': item.productName,
                    'Brand': item.brand,
                    'Category': item.category,
                    'Color': item.color,
                    'Size': item.size,
                    'Sex': item.sex,
                    'Stock': item.stock,
                    'Net Price': item.netPrice,
                    'Sale Price': item.salePrice,
                    'Inventory Date': item.date,
                    'Age (days)': item.age
                };
            });
            
            const ws = XLSX.utils.json_to_sheet(exportData);
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, "Inventory");
            
            // Generate timestamp for filename
            const timestamp = new Date().toISOString().replace(/[^0-9]/g, '').slice(0, 14);
            XLSX.writeFile(wb, `inventory_export_${timestamp}.xlsx`);
            
            alert('Inventory data exported to Excel file');
        }
        
        // Search inventory
        function searchInventoryItems() {
            const searchTerm = document.getElementById('searchInventory').value.toLowerCase();
            
            // Filter table rows
            const tableRows = document.querySelectorAll('#inventoryTableBody tr');
            tableRows.forEach(row => {
                const text = row.textContent.toLowerCase();
                if (text.includes(searchTerm)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
            
            // Filter mobile items
            const mobileItems = document.querySelectorAll('#inventoryListMobile > div');
            mobileItems.forEach(item => {
                const text = item.textContent.toLowerCase();
                if (text.includes(searchTerm)) {
                    item.style.display = '';
                } else {
                    item.style.display = 'none';
                }
            });
        }
        
        // Update size options based on product selection
        function updateSizeOptions() {
            const product = document.getElementById('productSelect').value;
            const sizeSelect = document.getElementById('sizeSelect');
            const priceField = document.getElementById('salePrice');
            
            // Clear existing options
            sizeSelect.innerHTML = '<option value="">Select Size</option>';
            
            // Set price based on product
            let price = 0;
            
            if (product === 'nike') {
                price = 129.99;
                const sizes = [7, 8, 9, 10, 11];
                sizes.forEach(size => {
                    const option = document.createElement('option');
                    option.value = size;
                    option.textContent = size;
                    sizeSelect.appendChild(option);
                });
            } else if (product === 'adidas') {
                price = 94.50;
                const sizes = [6, 7, 8, 9, 10];
                sizes.forEach(size => {
                    const option = document.createElement('option');
                    option.value = size;
                    option.textContent = size;
                    sizeSelect.appendChild(option);
                });
            } else if (product === 'puma') {
                price = 79.99;
                const sizes = [8, 9, 10, 11, 12];
                sizes.forEach(size => {
                    const option = document.createElement('option');
                    option.value = size;
                    option.textContent = size;
                    sizeSelect.appendChild(option);
                });
            }
            
            // Set the price in the price field
            priceField.value = price.toFixed(2);
        }
        
        // Initialize charts
        function initializeCharts() {
            const ctx = document.getElementById('salesChart').getContext('2d');
            
            // Check if chart already exists
            if (window.salesChart) {
                window.salesChart.destroy();
            }
            
            window.salesChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Sales ($)',
                        data: [1200, 1900, 800, 1400, 1600, 2100, 1800],
                        backgroundColor: 'rgba(59, 130, 246, 0.2)',
                        borderColor: 'rgba(59, 130, 246, 1)',
                        borderWidth: 2,
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
        }
        
        // Handle sale form submission
        document.getElementById('saleForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const product = document.getElementById('productSelect').value;
            const size = document.getElementById('sizeSelect').value;
            
            if (!product || !size) {
                alert('Please select a product and size');
                return;
            }
            
            alert('Sale completed successfully!');
            this.reset();
            document.getElementById('salePrice').value = '';
        });
        
        // Check screen size to toggle between table and list view
        function checkScreenSize() {
            const tableView = document.querySelector('.inventory-table');
            const mobileView = document.getElementById('inventoryListMobile');
            
            if (window.innerWidth >= 768) {
                tableView.parentElement.classList.remove('hidden');
                mobileView.classList.add('hidden');
            } else {
                tableView.parentElement.classList.add('hidden');
                mobileView.classList.remove('hidden');
            }
        }
        
        // Initialize with dashboard and responsive checks
        document.addEventListener('DOMContentLoaded', () => {
            showSection('dashboard');
            checkScreenSize();
            updateInventoryDisplay(); // Initialize inventory display
            
            // Setup event listeners for responsive design
            window.addEventListener('resize', checkScreenSize);
            
            // Initialize category and brand dropdowns
            const categorySelect = document.getElementById('categorySelect');
            categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category.toLowerCase();
                option.textContent = category;
                categorySelect.appendChild(option);
            });
            
            const brandSelect = document.getElementById('brandSelect');
            brands.forEach(brand => {
                const option = document.createElement('option');
                option.value = brand.toLowerCase();
                option.textContent = brand;
                brandSelect.appendChild(option);
            });
        });
    </script>
<script>document.body.addEventListener('wheel', e => { if (!e.ctrlKey) return; e.preventDefault(); return }, { passive: false })</script>
	</body>
</html>